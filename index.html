<!DOCTYPE html>
<html>
<head>
    <title>sandsite</title>
    <style>
        .neon-text {
            font-size: 80px;
            color: #fff;
            font-family: 'Brush Script MT', cursive;
            font-style: italic;
            text-align: center;
            text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #0073e6, 0 0 20px #0073e6, 0 0 25px #0073e6, 0 0 30px #0073e6, 0 0 35px #0073e6;
        }
        body { background-color: #111111; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    </style>
</head>
<body>
    <h1 class="neon-text" id="status">Loading...</h1>

    <!DOCTYPE html>
<html>
<head>
    <title>sandsite</title>
    <style>
        .neon-text {
            font-size: 80px;
            color: #fff;
            font-family: 'Brush Script MT', cursive;
            font-style: italic;
            text-align: center;
            text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #0073e6, 0 0 20px #0073e6, 0 0 25px #0073e6, 0 0 30px #0073e6, 0 0 35px #0073e6;
        }
        body { background-color: #111111; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    </style>
</head>
<body>
    <h1 class="neon-text" id="status">Loading...</h1>

    <script src="./powder.js"></script>

    <script>
        async function runWasm() {
            const statusElement = document.getElementById('status');
            
            try {
                // 2. Call the Emscripten factory function. 
                // It handles downloading the .wasm file, setting up memory, and linking C++ libraries automatically.
                const wasmModule = await create_powder();

                statusElement.textContent = "Wasm Loaded!";

                // 3. Print the initialized module to the console
                console.log("Emscripten Module loaded successfully:", wasmModule);

                // Note: C/C++ functions exported by Emscripten usually start with an underscore
                if (wasmModule._main) {
                    console.log("Found the C++ main() function!");
                    // If your game/simulation starts via the main() function in C++, you can call it here:
                    // wasmModule._main(); 
                }

            } catch (error) {
                statusElement.textContent = "Error!";
                console.error("Emscripten Load Error:", error);
            }
        }

        // Wait for the window to load to ensure powder.js has been parsed
        window.addEventListener('load', runWasm);
    </script>
</body>
</html>
</body>
</html>
